<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" sizes="any" href="/maple.svg">
	<title>Sora's Website</title>
	<script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="body.css">
</head>

<body>
	<div id="title">Sora's Blog</div>
	<div id="box">
		
		<label id="subtitle">_(:з」∠)_</label>
		<br><br><br>
		<div id="cont" style="text-align:left">
			<div class="spinner" id="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>
		</div>
		<br>
		<label id="copyright">Copyright ©2015 hare.ch Powered By Sora</label>
	</div>
	<script type="text/javascript">
	/* 设置box位置 */
	$('#box').css('left',$(window).width()/2-$('#box').width()/2);
	$(window).resize(function() {
	$('#box').css('left',$(window).width()/2-$('#box').width()/2);
	}); 
	
	/* 添加blog内容 */
	var line = '<hr style="height:1px;border:none;border-top:1px solid #bbbbbb;width:80%" />';
	var spinner = '<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>';
	
	$.get('/blog/article/main.txt',function(da){
		$('#loading').remove();
		decode(da);
	});
	
	function decode(data){
		//var dat = new Array();
		var a = data.split('@');
		for(var i in a){
			var b = a[i].split('~');
			var j = {};
			j.time = b[0];
			j.title = b[1];
			j.text = b[2];
			if(i==0){
				add(j,true,true);
				continue;
			}
			else{
				add(j,true,false);
			}
		}
	}
	
	function add(content, ifline ,first){
		var id = randomString(32);
		
		if(!!line&&!!first){
			var con = '<span class="article" style="width:80%"><label class="posttime">&hearts;'+ content.time +'</label><h2 style="text-align:center">' + content.title + '</h2><div class="text" id="' + id + '"></div><br>' + line + '</span>';
			$('#cont').append(con);
			$('#'+id).append(spinner);
			var html = $.ajax({
				url: content.text,
				async: false
				}).responseText; 
			$('#'+id).children('.spinner').remove();
			$('#'+id).append(html);
			return;
		}
		else if(!!line&&!first){
			var con = '<span class="article" style="width:80%"><label class="posttime">'+ content.time +'</label><h2 style="text-align:center">' + content.title + '</h2><div class="text" id="' + id + '"></div><br>' + line + '</span>';
			$('#cont').append(con);
			$('#'+id).append(spinner);
			var html = $.ajax({
				url: content.text,
				async: false
				}).responseText; 
			$('#'+id).children('.spinner').remove();
			$('#'+id).append(html);
			return;
		}
	}
	
	function randomString(len) {
		len = len || 32;
		var $chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890';
		var maxPos = $chars.length;
		var pwd = '';
		for (i = 0; i < len; i++) {
			pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
		}
		return pwd;
}
	</script>
</body>

</html>